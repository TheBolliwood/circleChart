(function(a){"use strict";a.fn.circleChart=function(g){const h={color:"#3459eb",backgroundColor:"#e6e6e6",background:!0,speed:2e3,widthRatio:0.2,value:66,unit:"percent",counterclockwise:!1,size:110,startAngle:0,animate:!0,backgroundFix:!0,lineCap:"round",animation:"easeInOutCubic",text:!1,redraw:!1,cAngle:0,textCenter:!0,textSize:!1,textWeight:"normal",textFamily:"sans-serif",relativeTextSize:1/7,autoCss:!0,onDraw:!1};Math.linearTween=(r,s,u,v)=>u*r/v+s,Math.easeInQuad=(r,s,u,v)=>{return r/=v,u*r*r+s},Math.easeOutQuad=(r,s,u,v)=>{return r/=v,-u*r*(r-2)+s},Math.easeInOutQuad=(r,s,u,v)=>{return(r/=v/2,1>r)?u/2*r*r+s:(r--,-u/2*(r*(r-2)-1)+s)},Math.easeInCubic=(r,s,u,v)=>{return r/=v,u*r*r*r+s},Math.easeOutCubic=(r,s,u,v)=>{return r/=v,r--,u*(r*r*r+1)+s},Math.easeInOutCubic=(r,s,u,v)=>{return(r/=v/2,1>r)?u/2*r*r*r+s:(r-=2,u/2*(r*r*r+2)+s)},Math.easeInQuart=(r,s,u,v)=>{return r/=v,u*r*r*r*r+s},Math.easeOutQuart=(r,s,u,v)=>{return r/=v,r--,-u*(r*r*r*r-1)+s},Math.easeInOutQuart=(r,s,u,v)=>{return(r/=v/2,1>r)?u/2*r*r*r*r+s:(r-=2,-u/2*(r*r*r*r-2)+s)},Math.easeInQuint=(r,s,u,v)=>{return r/=v,u*r*r*r*r*r+s},Math.easeOutQuint=(r,s,u,v)=>{return r/=v,r--,u*(r*r*r*r*r+1)+s},Math.easeInOutQuint=(r,s,u,v)=>{return(r/=v/2,1>r)?u/2*r*r*r*r*r+s:(r-=2,u/2*(r*r*r*r*r+2)+s)},Math.easeInSine=(r,s,u,v)=>-u*Math.cos(r/v*(Math.PI/2))+u+s,Math.easeOutSine=(r,s,u,v)=>u*Math.sin(r/v*(Math.PI/2))+s,Math.easeInOutSine=(r,s,u,v)=>-u/2*(Math.cos(Math.PI*r/v)-1)+s,Math.easeInExpo=(r,s,u,v)=>u*Math.pow(2,10*(r/v-1))+s,Math.easeOutExpo=(r,s,u,v)=>u*(-Math.pow(2,-10*r/v)+1)+s,Math.easeInOutExpo=(r,s,u,v)=>{return(r/=v/2,1>r)?u/2*Math.pow(2,10*(r-1))+s:(r--,u/2*(-Math.pow(2,-10*r)+2)+s)},Math.easeInCirc=(r,s,u,v)=>{return r/=v,-u*(Math.sqrt(1-r*r)-1)+s},Math.easeOutCubic=(r,s,u,v)=>{return r/=v,r--,u*(r*r*r+1)+s},Math.easeInOutCubic=(r,s,u,v)=>{return(r/=v/2,1>r)?u/2*r*r*r+s:(r-=2,u/2*(r*r*r+2)+s)},Math.easeOutCirc=(r,s,u,v)=>{return r/=v,r--,u*Math.sqrt(1-r*r)+s},Math.easeInOutCirc=(r,s,u,v)=>{return(r/=v/2,1>r)?-u/2*(Math.sqrt(1-r*r)-1)+s:(r-=2,u/2*(Math.sqrt(1-r*r)+1)+s)};let i=(r,s,u,v,w,x,y,z)=>{let A=Object.create(i.prototype);return A.pos=r,A.bAngle=s,A.eAngle=u,A.cAngle=v,A.radius=w,A.lineWidth=x,A.sAngle=y,A.settings=z,A};i.prototype={onDraw(r){if(!1!==this.settings.onDraw){let u=Object.assign({},this);var s={percent:p,rad:v=>v,"default":m};u.value=(s[this.settings.unit]||s["default"])(u.cAngle),u.text=v=>j(r,v),u.settings.onDraw(r,u)}},drawBackground(r){r.beginPath(),r.arc(this.pos,this.pos,this.settings.backgroundFix?0.9999*this.radius:this.radius,0,2*Math.PI),r.lineWidth=this.settings.backgroundFix?0.95*this.lineWidth:this.lineWidth,r.strokeStyle=this.settings.backgroundColor,r.stroke()},draw(r){if(r.beginPath(),this.settings.counterclockwise){let s=2*Math.PI;r.arc(this.pos,this.pos,this.radius,s-this.bAngle,s-(this.bAngle+this.cAngle),this.settings.counterclockwise)}else r.arc(this.pos,this.pos,this.radius,this.bAngle,this.bAngle+this.cAngle,this.settings.counterclockwise);r.lineWidth=this.lineWidth,r.lineCap=this.settings.lineCap,r.strokeStyle=this.settings.color,r.stroke()},animate(r,s,u,v,w){let x=new Date().getTime()-u;1>x&&(x=1),u-v<1.05*this.settings.speed&&(!w&&1e3*this.cAngle<=Math.floor(1e3*this.eAngle)||w&&1e3*this.cAngle>=Math.floor(1e3*this.eAngle))?(this.cAngle=Math[this.settings.animation]((u-v)/x,this.sAngle,this.eAngle-this.sAngle,this.settings.speed/x),s.clearRect(0,0,this.settings.size,this.settings.size),this.settings.background&&this.drawBackground(s),this.draw(s),this.onDraw(r),u=new Date().getTime(),q(()=>this.animate(r,s,u,v,w))):(this.cAngle=this.eAngle,s.clearRect(0,0,this.settings.size,this.settings.size),this.settings.background&&this.drawBackground(s),this.draw(s),this.setCurrentAnglesData(r))},setCurrentAnglesData(r){var s={percent:p,rad:v=>v,"default":m};let u=s[this.settings.unit]||s["default"];r.data("current-c-angle",u(this.cAngle)),r.data("current-start-angle",u(this.bAngle))}};let j=(r,s)=>{r.data("text",s),a(".circleChart_text",r).html(s)},l=r=>{var s=r.getContext("2d"),u=window.devicePixelRatio||1,v=s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1,w=u/v,x=r.width,y=r.height;r.width=x*w,r.height=y*w,r.style.width=x+"px",r.style.height=y+"px",s.scale(w,w)},m=r=>180*(r/Math.PI),n=r=>r/180*Math.PI,o=r=>n(360*(r/100)),p=r=>100*(m(r)/360),q=(r=>window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(){window.setTimeout(r,1e3/60)})();return this.each((r,s)=>{let u=a(s);var v={},w=u.data();for(let J in w)w.hasOwnProperty(J)&&0===J.indexOf("_cache_")&&h.hasOwnProperty(J.substring(7))&&(v[J.substring(7)]=w[J]);let x=Object.assign({},h,v,w,g);for(let J in x)0!==J.indexOf("_cache_")&&u.data("_cache_"+J,x[J]);a("canvas.circleChart_canvas",u).length||(u.append(function(){return a("<canvas/>",{"class":"circleChart_canvas"}).prop({width:x.size,height:x.size}).css(x.autoCss?{"margin-left":"auto","margin-right":"auto",display:"block"}:{})}),l(a("canvas",u).get(0))),a("p.circleChart_text",u).length||!1===x.text||(u.append("<p class='circleChart_text'>"+x.text+"</p>"),x.autoCss&&(x.textCenter?a("p.circleChart_text",u).css({position:"absolute","line-height":x.size+"px",top:0,width:"100%",margin:0,padding:0,"text-align":"center","font-size":!1===x.textSize?x.size*x.relativeTextSize:x.textSize,"font-weight":x.textWeight,"font-family":x.textFamily}):a("p.circleChart_text",u).css({"padding-top":"5px","text-align":"center","font-weight":x.textWeight,"font-family":x.textFamily,"font-size":!1===x.textSize?x.size*x.relativeTextSize:x.textSize}))),x.autoCss&&u.css("position","relative"),x.redraw||(x.cAngle=x.currentCAngle?x.currentCAngle:x.cAngle,x.startAngle=x.currentStartAngle?x.currentStartAngle:x.startAngle);var y=a("canvas",u).get(0),z=y.getContext("2d"),A={percent:o,rad:J=>J,"default":n};let B=A[x.unit]||A["default"],C=B(x.startAngle),D=B(x.value),E=B(x.cAngle);var F=x.size/2,G=F*(1-x.widthRatio/2),H=G*x.widthRatio,I=i(F,C,D,E,G,H,E,x);u.data("size",x.size),x.animate?0===x.value?q(()=>{z.clearRect(0,0,this.settings.size,this.settings.size),I.settings.background&&I.drawBackground(z)}):I.animate(u,z,new Date().getTime(),new Date().getTime(),E>D):(I.cAngle=I.eAngle,q(()=>{x.background&&I.drawBackground(z),0===x.value?(z.clearRect(0,0,this.settings.size,this.settings.size),I.settings.background&&I.drawBackground(z)):(I.draw(z),I.onDraw(u),I.setCurrentAnglesData(u))}))})}})(jQuery);
